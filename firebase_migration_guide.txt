FIREBASE PROJECT MIGRATION GUIDE
==================================

This guide provides step-by-step instructions to migrate your Flutter web application from one Firebase project to another.

PROJECT OVERVIEW
================
Current Project ID: t4g-for-business
Application Type: Flutter Web Application
Firebase Services Used:
- Firebase Authentication
- Cloud Firestore
- Firebase Storage
- Firebase Core

MIGRATION CHECKLIST
==================

□ STEP 1: BACKUP CURRENT DATA
-----------------------------
1. Export Firestore data:
   - Go to Firebase Console > Firestore Database
   - Use the Import/Export feature or gcloud commands:
     gcloud firestore export gs://[OLD_PROJECT_BUCKET]/firestore-backup
   
2. Export Authentication users:
   - Go to Firebase Console > Authentication > Users
   - Export user data via Firebase CLI:
     firebase auth:export users.json --project [OLD_PROJECT_ID]

3. Backup Storage files:
   - Download all files from Firebase Storage
   - Use gsutil or Firebase Console to export files:
     gsutil -m cp -r gs://[OLD_STORAGE_BUCKET] ./storage-backup

□ STEP 2: CREATE NEW FIREBASE PROJECT
-------------------------------------
1. Go to Firebase Console (https://console.firebase.google.com)
2. Click "Add project" or "Create a project"
3. Enter new project name and ID
4. Configure Google Analytics (optional)
5. Enable required services:
   - Authentication (Email/Password, Google, etc.)
   - Firestore Database
   - Storage

□ STEP 3: CONFIGURE FIREBASE SERVICES
-------------------------------------
1. Authentication:
   - Go to Authentication > Sign-in method
   - Enable the same providers as old project
   - Configure authorized domains if needed

2. Firestore Database:
   - Create database in same region as old project
   - Set up security rules (copy from old project)

3. Storage:
   - Create default bucket
   - Configure security rules (copy from old project)

□ STEP 4: UPDATE FLUTTER APPLICATION
------------------------------------
1. Get new Firebase configuration:
   - In Firebase Console, go to Project Settings
   - Click "Add app" > Web
   - Register your app and copy the config

2. Update environment variables in .env file:
   FIREBASE_API_KEY=[NEW_API_KEY]
   FIREBASE_APP_ID=[NEW_APP_ID]
   FIREBASE_MESSAGING_SENDER_ID=[NEW_SENDER_ID]
   FIREBASE_PROJECT_ID=[NEW_PROJECT_ID]
   FIREBASE_AUTH_DOMAIN=[NEW_PROJECT_ID].firebaseapp.com
   FIREBASE_STORAGE_BUCKET=[NEW_PROJECT_ID].firebasestorage.app
   FIREBASE_MEASUREMENT_ID=[NEW_MEASUREMENT_ID]

3. Update web/env.js file (if exists):
   - Replace all Firebase configuration values with new ones

4. If using FlutterFire CLI, regenerate config:
   flutter pub global activate flutterfire_cli
   flutterfire configure --project=trash4business-17c13

□ STEP 5: IMPORT DATA TO NEW PROJECT
-----------------------------------
1. Import Firestore data:
   gcloud firestore import gs://[NEW_PROJECT_BUCKET]/firestore-backup --project [NEW_PROJECT_ID]

2. Import Authentication users:
   firebase auth:import users.json --project [NEW_PROJECT_ID]

3. Upload Storage files:
   gsutil -m cp -r ./storage-backup/* gs://[NEW_PROJECT_BUCKET]

□ STEP 6: UPDATE SECURITY RULES
-------------------------------
1. Firestore Rules:
   - Copy rules from old project to new project
   - Test rules in Firebase Console simulator

2. Storage Rules:
   - Copy storage rules from old project
   - Ensure bucket names are updated in rules

□ STEP 7: TESTING
-----------------
1. Test Authentication:
   - Login with existing account
   - Register new account
   - Password reset functionality

2. Test Firestore:
   - Read existing data
   - Write new data
   - Update/delete operations

3. Test Storage:
   - Upload files
   - Download files
   - Delete files

□ STEP 8: DEPLOYMENT UPDATES
---------------------------
1. Update deployment scripts:
   - Update any CI/CD scripts with new project ID
   - Update hosting configuration if using Firebase Hosting

2. Update API keys in production:
   - Update environment variables in hosting provider
   - Ensure all Firebase config is updated

3. Update domain authorization:
   - Add production domain to Firebase Auth authorized domains
   - Update CORS settings if needed

□ STEP 9: MONITORING & VERIFICATION
----------------------------------
1. Monitor Firebase Console:
   - Check Authentication users are working
   - Verify Firestore operations
   - Monitor Storage usage

2. Check application logs:
   - Ensure no Firebase errors
   - Verify all features work correctly

3. Performance check:
   - Test app performance with new project
   - Verify all API calls are successful

IMPORTANT NOTES
===============

1. ENVIRONMENT CONFIGURATION:
   Your app uses environment variables loaded via WebEnv.getEnv() from window.__ENV__
   Ensure your server.js or hosting setup injects the new Firebase config values

2. WEB-ONLY APPLICATION:
   Your current setup only supports web platform
   Android/iOS platforms would need additional configuration files

3. BILLING:
   - Review billing settings on new project
   - Set up budget alerts if needed
   - Cancel old project billing after successful migration

4. SECURITY:
   - Rotate any API keys if compromised
   - Review IAM permissions on new project
   - Update any external service integrations

ROLLBACK PLAN
=============
If migration fails:
1. Keep old project active
2. Revert .env file changes
3. Redeploy application with old configuration
4. Investigate issues before retry

POST-MIGRATION CLEANUP
======================
After successful migration and testing:
1. Delete old Firebase project (after 30-day grace period)
2. Remove old configuration files
3. Update documentation with new project details
4. Notify team members of new project access

FIREBASE CLI COMMANDS REFERENCE
===============================
Install Firebase CLI: npm install -g firebase-tools
Login: firebase login
Set project: firebase use [PROJECT_ID]
Deploy rules: firebase deploy --only firestore:rules
Deploy functions: firebase deploy --only functions
Export auth: firebase auth:export users.json
Import auth: firebase auth:import users.json

TROUBLESHOOTING
===============
Common issues and solutions:

1. "Firebase project not found"
   - Verify project ID is correct
   - Ensure you have access to the new project

2. "Invalid API key"
   - Double-check API key in .env file
   - Ensure web app is registered in Firebase project

3. "Permission denied" errors
   - Check Firestore security rules
   - Verify user authentication status

4. CORS errors
   - Add domain to Firebase Auth authorized domains
   - Check hosting configuration

For additional help, refer to Firebase documentation:
https://firebase.google.com/docs/projects/learn-more#moving-project-data